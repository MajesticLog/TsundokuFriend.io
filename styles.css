/* =====================================================
   積読フレンド — styles.css
   Rules:
   · No box-shadow or drop-shadow anywhere
   · No background fills except: topbar, nav,
     flashcard back face, rating buttons, theme dots
   · Everything else: border/stroke only, transparent bg
   · Rounded corners everywhere (--radius-box / --radius-pill)
   · Fonts: Funnel Display (UI) + Kosugi Maru (Japanese)
===================================================== */

/* ── Google Fonts ─────────────────────────────────── */
@import url('https://fonts.googleapis.com/css2?family=Funnel+Display:wght@300;400;500;600&family=Kosugi+Maru&display=swap');

/* ── Theme tokens ─────────────────────────────────── */

/* Theme 1 — Flowers (default) */
:root {
  --bg:             #EDF2D4;
  --accent:         #CAC4F6;
  --accent-2:       #667F60;
  --ink:            #4B4A3E;
  --muted:          color-mix(in srgb, var(--ink) 55%, transparent);

  --border:         color-mix(in srgb, var(--ink) 22%, transparent);
  --border-strong:  color-mix(in srgb, var(--ink) 42%, transparent);
  --accent-stroke:  color-mix(in srgb, var(--accent) 80%, var(--ink) 20%);
  --accent2-stroke: color-mix(in srgb, var(--accent-2) 70%, var(--ink) 30%);

  --radius-box:  18px;
  --radius-pill: 999px;
  --stroke:      1.5px;
  --stroke-strong: 2px;

  --ring: 0 0 0 3px color-mix(in srgb, var(--accent) 50%, transparent);

  /* flashcard back — intentional fill */
  --fc-back-bg:  color-mix(in srgb, var(--ink) 90%, var(--bg));
  --fc-back-ink: var(--bg);
}

/* Theme 2 — Joyful */
:root[data-theme="joyful"] {
  --bg:             #FFF0F7;
  --accent:         #FFB8D9;
  --accent-2:       #7AAF00;
  --ink:            #2A2020;
  --muted:          color-mix(in srgb, var(--ink) 52%, transparent);

  --border:         rgba(42,32,32,0.18);
  --border-strong:  rgba(42,32,32,0.32);
  --accent-stroke:  rgba(255,140,185,0.9);
  --accent2-stroke: rgba(122,175,0,0.85);

  --ring: 0 0 0 3px rgba(255,184,217,0.45);

  --fc-back-bg:  #2A2020;
  --fc-back-ink: #FFF0F7;
}

/* Theme 3 — Plum */
:root[data-theme="plum"] {
  --bg:             #2A1620;
  --accent:         #AF6384;
  --accent-2:       #7C6E8A;
  --ink:            #F0E8EE;
  --muted:          color-mix(in srgb, var(--ink) 55%, transparent);

  --border:         rgba(240,232,238,0.20);
  --border-strong:  rgba(240,232,238,0.38);
  --accent-stroke:  rgba(175,99,132,0.95);
  --accent2-stroke: rgba(124,110,138,0.90);

  --ring: 0 0 0 3px rgba(175,99,132,0.40);

  --fc-back-bg:  color-mix(in srgb, var(--accent) 30%, var(--ink) 70%);
  --fc-back-ink: var(--ink);
}

/* ── Reset ────────────────────────────────────────── */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  box-shadow: none !important;
  text-shadow: none !important;
}

/* ── Base ─────────────────────────────────────────── */
body {
  font-family: 'Funnel Display', sans-serif;
  font-weight: 300;
  color: var(--ink);
  background: var(--bg);
  min-height: 100vh;
}

/* Japanese text */
.kanji-large, .kanji-cell,
.reading, .reading-cell,
.fc-word, .fc-word-back, .fc-reading-front, .fc-reading-back,
.mini-k, .mini-r,
.selected-radicals, .radical-btn,
.book-item, .fc-results-title,
.fc-stat .val, .fc-again-item .k, .fc-again-item .r,
.candidate-row button,
.search-bar input {
  font-family: 'Kosugi Maru', sans-serif;
}

/* ── Typography ──────────────────────────────────── */
h1, h2, h3 {
  font-family: 'Funnel Display', sans-serif;
  font-weight: 400;
  letter-spacing: 0.03em;
}
h2 {
  font-size: 0.82rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  color: var(--muted);
}

/* ── TOPBAR (filled — intentional) ──────────────── */
.topbar {
  position: sticky;
  top: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 14px 22px;
  background: var(--accent);
  border-bottom: var(--stroke-strong) solid var(--border-strong);
}
.topbar h1 {
  font-family: 'Funnel Display', sans-serif;
  font-weight: 500;
  font-size: 1.2rem;
  letter-spacing: 0.06em;
  color: var(--ink);
}
.topbar-right { display: flex; align-items: center; gap: 14px; }
.tagline {
  font-family: 'Funnel Display', sans-serif;
  font-weight: 300;
  font-size: 0.88rem;
  font-style: italic;
  color: var(--ink);
  opacity: 0.78;
  white-space: nowrap;
}

/* Theme dots — filled swatch (intentional) */
.theme-dots { display: flex; gap: 8px; align-items: center; }
.theme-dot {
  width: 15px; height: 15px;
  border-radius: 50%;
  border: var(--stroke-strong) solid var(--border-strong);
  background: var(--dot);
  cursor: pointer;
  transition: transform 0.12s ease, border-color 0.12s ease;
}
.theme-dot:hover  { transform: scale(1.18); }
.theme-dot.active { border-color: var(--ink); }

/* ── NAV (filled — intentional) ─────────────────── */
nav {
  display: flex;
  flex-wrap: wrap;
  gap: 2px;
  padding: 0 18px;
  background: color-mix(in srgb, var(--accent) 55%, var(--bg) 45%);
  border-bottom: var(--stroke) solid var(--border-strong);
}
nav button {
  background: transparent;
  border: none;
  border-bottom: var(--stroke-strong) solid transparent;
  margin-bottom: calc(-1 * var(--stroke));
  font-family: 'Funnel Display', sans-serif;
  font-weight: 400;
  font-size: 0.95rem;
  padding: 11px 18px;
  cursor: pointer;
  color: var(--ink);
  opacity: 0.62;
  transition: opacity 140ms ease, border-color 140ms ease, transform 140ms ease;
  letter-spacing: 0.04em;
}
nav button:hover         { opacity: 1; transform: translateY(-1px); }
nav button.active        { opacity: 1; border-bottom-color: var(--ink); font-weight: 500; }
nav button:focus-visible { outline: none; box-shadow: var(--ring) !important; }

/* ── Main layout ─────────────────────────────────── */
main { max-width: 1100px; margin: 0 auto; padding: 28px 20px; }

/* ── Panel visibility ────────────────────────────── */
.panel { display: none; }
.panel.active {
  display: block;
  animation: panelIn 180ms ease both;
}
@keyframes panelIn {
  from { opacity: 0; transform: translateY(5px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Cards — stroke only ─────────────────────────── */
.card {
  background: transparent;
  border: var(--stroke) solid var(--border);
  border-radius: var(--radius-box);
  padding: 22px;
}
.card h2 {
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: var(--stroke) solid var(--border);
}

/* ── Inputs, textareas, selects — stroke only ────── */
input, textarea, select {
  font-family: 'Funnel Display', sans-serif;
  font-weight: 300;
  background: transparent;
  color: var(--ink);
  border: var(--stroke) solid var(--border);
  border-radius: var(--radius-pill);
  padding: 8px 14px;
  outline: none;
  transition: border-color 140ms ease;
}
input:focus, textarea:focus, select:focus {
  border-color: var(--accent-stroke);
  box-shadow: var(--ring) !important;
}
textarea {
  border-radius: var(--radius-box);
  resize: vertical;
  line-height: 1.8;
}
select { padding-right: 28px; cursor: pointer; }

input[type=range] {
  border: none;
  border-radius: 0;
  padding: 0;
  accent-color: var(--ink);
  width: 80px;
}
input[type=color] {
  width: 32px; height: 30px;
  padding: 2px;
  border-radius: var(--radius-pill);
  cursor: pointer;
}

/* ── Canvas — stroke only ────────────────────────── */
canvas {
  display: block;
  background: transparent;
  border: var(--stroke) solid var(--border);
  border-radius: var(--radius-box);
  cursor: crosshair;
  touch-action: none;
  pointer-events: auto;
}
#writing-canvas-1, #writing-canvas-2 {
  pointer-events: auto !important;
  touch-action: none !important;
  cursor: crosshair;
}

/* ── Buttons — stroke only ───────────────────────── */
button, .btn {
  font-family: 'Funnel Display', sans-serif;
  font-weight: 400;
  background: transparent;
  border: var(--stroke) solid var(--accent2-stroke);
  border-radius: var(--radius-pill);
  color: var(--ink);
  padding: 7px 16px;
  cursor: pointer;
  font-size: 0.9rem;
  letter-spacing: 0.04em;
  transition: border-color 130ms ease, transform 120ms ease, opacity 130ms ease;
}
button:hover, .btn:hover  { border-color: var(--accent-stroke); transform: translateY(-1px); }
button:active, .btn:active { transform: translateY(0); }
button:focus-visible, .btn:focus-visible { outline: none; box-shadow: var(--ring) !important; }

.btn-outline { border-color: var(--border); }
.btn-outline:hover { border-color: var(--border-strong); }
.btn-sm { padding: 4px 12px; font-size: 0.82rem; }

.del-btn {
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  font-size: 1rem;
  border-radius: var(--radius-pill);
  transition: color 140ms ease;
}
.del-btn:hover { color: var(--accent-stroke); }

/* ── Utility ─────────────────────────────────────── */
.status-msg {
  font-size: 0.88rem;
  color: var(--muted);
  font-style: italic;
  padding: 10px 0;
}
.empty-state {
  text-align: center;
  padding: 48px 24px;
  color: var(--muted);
  font-style: italic;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: none; }
}

/* ── Search bar ──────────────────────────────────── */
.search-bar { display: flex; gap: 8px; margin-bottom: 18px; }
.search-bar input { flex: 1; font-family: 'Kosugi Maru', sans-serif; font-size: 1.05rem; }

/* ── Lookup results ──────────────────────────────── */
#results { min-height: 80px; }
.result-entry {
  border-bottom: var(--stroke) solid var(--border);
  padding: 14px 0;
  animation: fadeIn 0.25s ease;
}
.result-entry:last-child { border-bottom: none; }

.word-header {
  display: flex;
  align-items: baseline;
  gap: 12px;
  margin-bottom: 6px;
  flex-wrap: wrap;
}
.kanji-large { font-size: 2rem; line-height: 1; }
.reading     { font-size: 1rem; color: var(--muted); }

.jlpt-badge {
  font-size: 0.68rem;
  font-family: 'Funnel Display', sans-serif;
  border: var(--stroke) solid var(--accent-stroke);
  border-radius: var(--radius-pill);
  padding: 2px 8px;
  letter-spacing: 0.06em;
  background: transparent;
  color: var(--ink);
}
.meanings { font-size: 1rem; margin-bottom: 6px; line-height: 1.6; }
.tags      { font-size: 0.8rem; color: var(--muted); font-style: italic; }

.add-btn {
  margin-top: 8px;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  align-items: center;
}
.add-btn select { max-width: 180px; font-size: 0.85rem; }

/* ── Grid layouts ────────────────────────────────── */
.lookup-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
@media (max-width: 700px) { .lookup-grid { grid-template-columns: 1fr; } }

/* ── Word Lists ──────────────────────────────────── */
.lists-layout { display: grid; grid-template-columns: 220px 1fr; gap: 24px; min-height: 60vh; }
@media (max-width: 700px) { .lists-layout { grid-template-columns: 1fr; } }

.new-book-form { display: flex; gap: 6px; margin-bottom: 14px; }
.new-book-form input { flex: 1; font-size: 0.9rem; }

.book-list { display: flex; flex-direction: column; gap: 6px; }
.book-item {
  padding: 10px 16px;
  background: transparent;
  border: var(--stroke) solid var(--border);
  border-radius: var(--radius-box);
  cursor: pointer;
  font-family: 'Kosugi Maru', sans-serif;
  font-size: 0.88rem;
  transition: border-color 140ms ease;
}
.book-item:hover  { border-color: var(--border-strong); }
.book-item.active { border-color: var(--accent-stroke); }
.book-item .book-count { font-size: 0.72rem; color: var(--muted); margin-top: 2px; }

.words-table { width: 100%; border-collapse: collapse; }
.words-table th {
  text-align: left;
  padding: 8px 12px;
  background: transparent;
  border: var(--stroke) solid var(--border);
  font-family: 'Funnel Display', sans-serif;
  font-size: 0.78rem;
  font-weight: 500;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
}
.words-table td {
  padding: 10px 12px;
  border: var(--stroke) solid var(--border);
  vertical-align: top;
  background: transparent;
}
.words-table tr:nth-child(even) td {
  background: color-mix(in srgb, var(--ink) 3%, transparent);
}
.words-table .kanji-cell   { font-family: 'Kosugi Maru', sans-serif; font-size: 1.2rem; width: 90px; }
.words-table .reading-cell { font-family: 'Kosugi Maru', sans-serif; font-size: 0.88rem; color: var(--muted); width: 120px; }
.words-table .meaning-cell { font-size: 0.92rem; }
.words-table .action-cell  { width: 50px; text-align: center; }

/* Share toolbar */
.share-toolbar {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 12px;
  align-items: center;
}
.sync-badge {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-size: 0.76rem;
  padding: 3px 10px;
  border-radius: var(--radius-pill);
  font-style: italic;
  color: var(--muted);
  border: var(--stroke) solid var(--border);
  background: transparent;
}
.sync-badge.live    { color: #3a9e5c; border-color: #3a9e5c; }
.sync-badge.live::before { content: '●'; font-style: normal; font-size: 0.55rem; }
.sync-badge.syncing { color: #c8920a; border-color: #c8920a; }
.sync-badge.syncing::before { content: '↻'; font-style: normal; }
.sync-badge.error   { color: var(--accent-stroke); border-color: var(--accent-stroke); }

/* Modal */
.modal-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: color-mix(in srgb, var(--ink) 38%, transparent);
  z-index: 200;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(3px);
}
.modal-overlay.open { display: flex; }
.modal {
  background: var(--bg);
  border: var(--stroke-strong) solid var(--border-strong);
  border-radius: var(--radius-box);
  padding: 28px 28px 24px;
  max-width: 460px;
  width: 90%;
  animation: fadeIn 0.18s ease;
}
.modal h2 { margin-bottom: 18px; padding-bottom: 10px; border-bottom: var(--stroke) solid var(--border); }
.modal-section { margin-bottom: 18px; }
.modal-section label {
  display: block;
  font-size: 0.78rem;
  color: var(--muted);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin-bottom: 6px;
}
.modal-row   { display: flex; gap: 8px; align-items: stretch; }
.modal-input { flex: 1; font-size: 0.9rem; min-width: 0; border-radius: var(--radius-pill); }
.modal-input.mono { font-family: monospace; font-size: 0.82rem; letter-spacing: 0.05em; }
.modal-desc  { font-size: 0.82rem; color: var(--muted); font-style: italic; margin-top: 6px; line-height: 1.5; }
.modal-footer   { display: flex; justify-content: flex-end; gap: 8px; margin-top: 6px; }
.modal-divider  { border: none; border-top: var(--stroke) solid var(--border); margin: 18px 0; }

/* Import banner */
#import-banner {
  background: var(--accent);
  color: var(--ink);
  padding: 12px 20px;
  text-align: center;
  font-size: 0.95rem;
  border-bottom: var(--stroke) solid var(--border-strong);
}

/* ── Handwriting panel ───────────────────────────── */
.writing-layout           { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
.writing-layout.writing-two { grid-template-columns: 1fr 1fr; }
@media (max-width: 980px) { .writing-layout.writing-two { grid-template-columns: 1fr; } }
@media (max-width: 700px) { .writing-layout { grid-template-columns: 1fr; } }

.canvas-wrap     { display: flex; flex-direction: column; gap: 12px; }
.canvas-controls { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.brush-row       { display: flex; align-items: center; gap: 8px; font-size: 0.88rem; color: var(--muted); }
.hw-build        { grid-column: 1 / -1; }

.candidate-row { margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap; }
.candidate-row button { font-family: 'Kosugi Maru', sans-serif; font-size: 1.1rem; padding: 5px 12px; }

.mini-row {
  display: grid;
  grid-template-columns: 110px 110px 1fr;
  gap: 10px;
  padding: 10px 0;
  border-top: var(--stroke) solid var(--border);
  cursor: pointer;
  transition: opacity 130ms ease;
}
.mini-row:hover        { opacity: 0.72; }
.mini-row:first-child  { border-top: none; }
.mini-k { font-family: 'Kosugi Maru', sans-serif; font-size: 1.4rem; }
.mini-r { font-family: 'Kosugi Maru', sans-serif; color: var(--muted); font-size: 0.9rem; }
.mini-m { color: var(--ink); font-size: 0.88rem; }
@media (max-width: 700px) {
  .mini-row { grid-template-columns: 90px 1fr; }
  .mini-m   { grid-column: 1 / -1; }
}

/* ── Radicals panel ──────────────────────────────── */
.radical-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
@media (max-width: 700px) { .radical-layout { grid-template-columns: 1fr; } }

.radical-info { font-size: 0.84rem; color: var(--muted); margin-bottom: 12px; line-height: 1.55; }

.selected-radicals {
  font-family: 'Kosugi Maru', sans-serif;
  font-size: 1.6rem;
  letter-spacing: 0.2em;
  min-height: 2.2rem;
  margin-bottom: 10px;
  color: var(--accent-stroke);
}

.stroke-filter { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 12px; }
.stroke-btn {
  background: transparent;
  border: var(--stroke) solid var(--border);
  padding: 3px 10px;
  border-radius: var(--radius-pill);
  font-size: 0.82rem;
  cursor: pointer;
  transition: border-color 130ms ease;
}
.stroke-btn:hover  { border-color: var(--border-strong); }
.stroke-btn.active { border-color: var(--accent-stroke); color: var(--accent-stroke); }

.radical-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  max-height: 300px;
  overflow-y: auto;
  background: transparent;
  border: var(--stroke) solid var(--border);
  padding: 10px;
  border-radius: var(--radius-box);
}
.radical-btn {
  width: 38px; height: 38px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Kosugi Maru', sans-serif;
  font-size: 1.15rem;
  border: var(--stroke) solid var(--border);
  background: transparent;
  cursor: pointer;
  border-radius: 10px;
  transition: border-color 130ms ease;
  position: relative;
}
.radical-btn:hover    { border-color: var(--border-strong); }
.radical-btn.selected { border-color: var(--accent-stroke); color: var(--accent-stroke); }
.radical-btn .strokes {
  position: absolute;
  top: 1px; right: 2px;
  font-size: 0.42rem;
  font-family: monospace;
  color: var(--muted);
  opacity: 0.7;
}
.radical-btn.selected .strokes { color: var(--accent-stroke); opacity: 1; }

/* ── Flashcards ──────────────────────────────────── */
.fc-setup { max-width: 560px; margin: 0 auto; }
.fc-setup .card { margin-bottom: 20px; }
.fc-book-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px; }
.fc-book-opt {
  padding: 8px 18px;
  border: var(--stroke) solid var(--border);
  border-radius: var(--radius-pill);
  background: transparent;
  cursor: pointer;
  font-family: 'Kosugi Maru', sans-serif;
  font-size: 0.88rem;
  transition: border-color 130ms ease;
}
.fc-book-opt:hover    { border-color: var(--border-strong); }
.fc-book-opt.selected { border-color: var(--accent-stroke); color: var(--accent-stroke); }

.fc-options { display: flex; flex-direction: column; gap: 12px; }
.fc-option-row { display: flex; align-items: center; gap: 14px; font-size: 0.92rem; }
.fc-option-row label  { min-width: 130px; color: var(--muted); }
.fc-option-row select { font-size: 0.88rem; }

.fc-study { display: none; }
.fc-study.active {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 16px 0;
}

.fc-progress-bar-wrap {
  width: 100%; max-width: 600px;
  display: flex; align-items: center; gap: 14px;
  font-size: 0.84rem; color: var(--muted);
}
.fc-progress-bar {
  flex: 1; height: 5px;
  background: color-mix(in srgb, var(--ink) 12%, transparent);
  border-radius: var(--radius-pill);
  overflow: hidden;
  border: none;
}
.fc-progress-fill {
  height: 100%;
  background: var(--accent-stroke);
  border-radius: var(--radius-pill);
  transition: width 0.4s ease;
}

.fc-card-scene {
  width: 100%; max-width: 520px; height: 300px;
  perspective: 1000px;
  cursor: pointer;
}
.fc-card-inner {
  width: 100%; height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.5s cubic-bezier(0.4,0,0.2,1);
}
.fc-card-scene.flipped .fc-card-inner { transform: rotateY(180deg); }

.fc-card-face {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  border-radius: var(--radius-box);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px;
  border: var(--stroke-strong) solid var(--border);
  background: transparent;
}
.fc-front { background: transparent; }
.fc-back {
  background: var(--fc-back-bg);   /* intentional fill */
  border-color: transparent;
  transform: rotateY(180deg);
  color: var(--fc-back-ink);
}

.fc-hint {
  font-size: 0.74rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 14px;
}
.fc-back .fc-hint { color: color-mix(in srgb, var(--fc-back-ink) 50%, transparent); }

.fc-word {
  font-family: 'Kosugi Maru', sans-serif;
  font-size: 4.5rem;
  line-height: 1;
  text-align: center;
  color: var(--ink);
}
.fc-word-back {
  font-family: 'Kosugi Maru', sans-serif;
  font-size: 2.5rem;
  margin-bottom: 8px;
}
.fc-meaning-back {
  font-family: 'Funnel Display', sans-serif;
  font-size: 1.35rem;
  text-align: center;
  line-height: 1.5;
  margin-bottom: 6px;
}
.fc-reading-front { font-family: 'Kosugi Maru', sans-serif; font-size: 1rem; color: var(--muted); margin-top: 10px; }
.fc-reading-back  {
  font-family: 'Kosugi Maru', sans-serif;
  font-size: 0.95rem; margin-top: 8px;
  color: color-mix(in srgb, var(--fc-back-ink) 55%, transparent);
}
.fc-tap-hint {
  font-family: 'Funnel Display', sans-serif;
  font-size: 0.72rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--muted);
  margin-top: 12px;
}

/* Rating buttons — intentional fills (semantic colour coding) */
.fc-ratings {
  display: none;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  max-width: 520px; width: 100%;
}
.fc-ratings.visible { display: flex; animation: fadeIn 0.22s ease; }

.fc-rating-btn {
  flex: 1;
  min-width: 88px; max-width: 136px;
  padding: 11px 8px;
  border-radius: var(--radius-box);
  font-family: 'Funnel Display', sans-serif;
  font-size: 0.95rem;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  transition: transform 0.1s, opacity 0.1s;
  border: none;
}
.fc-rating-btn:hover  { opacity: 0.86; transform: translateY(-2px); }
.fc-rating-btn:active { transform: scale(0.96); }
.fc-rating-btn .label { font-weight: 500; font-size: 0.9rem; }
.fc-rating-btn .sub   { font-family: 'Kosugi Maru', sans-serif; font-size: 0.72rem; opacity: 0.78; }

/* These fills are intentional semantic colour coding */
.fc-btn-again { background: #D94F4F !important; color: #fff; }
.fc-btn-hard  { background: #D4812A !important; color: #fff; }
.fc-btn-good  { background: #3A9E5C !important; color: #fff; }
.fc-btn-easy  { background: #3A7FBF !important; color: #fff; }

.fc-session-stats {
  display: flex; gap: 22px; justify-content: center;
  max-width: 520px; width: 100%;
  font-size: 0.84rem; color: var(--muted);
}
.fc-stat { text-align: center; }
.fc-stat .val {
  font-family: 'Funnel Display', sans-serif;
  font-size: 1.5rem;
  font-weight: 400;
  color: var(--ink);
  display: block;
}
.fc-shortcuts {
  font-size: 0.73rem; color: var(--muted);
  font-style: italic; text-align: center; opacity: 0.8;
}

.fc-results {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 24px;
  padding: 40px 20px;
  text-align: center;
  max-width: 560px;
  margin: 0 auto;
}
.fc-results.active { display: flex; animation: fadeIn 0.35s ease; }
.fc-results-title  { font-family: 'Funnel Display', sans-serif; font-size: 1.9rem; font-weight: 300; letter-spacing: 0.12em; }

.fc-results-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px; width: 100%; }
.fc-results-stat {
  background: transparent;
  border: var(--stroke) solid var(--border);
  border-radius: var(--radius-box);
  padding: 16px 8px;
  text-align: center;
}
.fc-results-stat .big { font-family: 'Funnel Display', sans-serif; font-size: 2rem; font-weight: 400; }
.fc-results-stat .lbl { font-size: 0.72rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.1em; margin-top: 4px; }

.fc-again-list {
  width: 100%;
  background: transparent;
  border: var(--stroke) solid var(--border);
  border-radius: var(--radius-box);
  padding: 16px 18px;
  text-align: left;
}
.fc-again-list h3 { font-size: 0.78rem; letter-spacing: 0.15em; color: var(--muted); text-transform: uppercase; margin-bottom: 10px; }
.fc-again-item {
  display: flex; gap: 12px; padding: 6px 0;
  border-bottom: var(--stroke) solid var(--border);
  font-size: 0.9rem; align-items: baseline;
}
.fc-again-item:last-child { border-bottom: none; }
.fc-again-item .k { font-family: 'Kosugi Maru', sans-serif; font-size: 1.2rem; min-width: 32px; }
.fc-again-item .r { font-family: 'Kosugi Maru', sans-serif; color: var(--muted); font-size: 0.84rem; }
.fc-again-item .m { color: var(--ink); }

/* ── Flashcard setup book/option selectors ───────── */
.fc-option-row select { border-radius: var(--radius-pill); }

/* ── Scrollbar ───────────────────────────────────── */
::-webkit-scrollbar       { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: var(--radius-pill); }
