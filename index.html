<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ç©èª­ãƒ•ãƒ¬ãƒ³ãƒ‰ â™¥ </title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link href="https://fonts.gstatic.com" rel="preconnect" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Funnel+Display:wght@300;400;500;600&family=Kosugi+Maru&display=swap" rel="stylesheet"/>
<link href="styles.css" rel="stylesheet"/>
</head>
<body>
<header class="topbar">
<div class="topbar-left">
<h1>ç©èª­ãƒ•ãƒ¬ãƒ³ãƒ‰â™¥</h1>
</div>
<div class="topbar-right">
<span class="tagline">Japanese Reading Companion</span>
<div aria-label="Theme" class="theme-dots">
<button aria-label="Flowers theme" class="theme-dot" data-theme="flowers" title="Flowers" type="button"></button>
<button aria-label="Joyful theme" class="theme-dot" data-theme="joyful" title="Joyful" type="button"></button>
<button aria-label="Plum theme" class="theme-dot" data-theme="plum" title="Plum" type="button"></button>
</div>
</div>
</header>
<nav>
<button class="active" onclick="showPanel('lookup', this)">ğŸ” Lookup</button>
<button onclick="showPanel('bookshelf', this)">ğŸ“– Books</button>
<button onclick="showPanel('lists', this)">ğŸ“š Word Lists</button>
<button onclick="showPanel('writing', this)">âœï¸ Handwrite</button>
<button onclick="showPanel('radicals', this)">éƒ¨é¦– Radicals</button>
<button onclick="showPanel('flashcards', this)">ğŸƒ Flashcards</button>
</nav>
<main>
<!-- â”€â”€ LOOKUP PANEL â”€â”€ -->
<div class="panel active" id="panel-lookup">
<div class="lookup-grid">
<div class="card">
<h2>Word Search â€” å˜èªæ¤œç´¢</h2>
<div class="search-bar">
<input autocomplete="off" id="search-input" placeholder="Enter kanji, kana, or romajiâ€¦" type="text"/>
<button class="btn" onclick="lookupWord()">Search</button>
</div>
<div id="results"><p class="status-msg">Search for any Japanese word above.</p></div>
</div>
<div class="card">
<h2>Quick Notes â€” ãƒ¡ãƒ¢</h2>
<textarea id="quick-notes" placeholder="Jot down notes, sentences, contextâ€¦" style="width:100%;min-height:200px;font-family:'Kosugi Maru',sans-serif;font-size:0.95rem;line-height:1.9;padding:12px;outline:none;resize:vertical;"></textarea>
</div>
</div>
</div>
<!-- â”€â”€ WORD LISTS PANEL â”€â”€ -->
<div class="panel" id="panel-lists">
<div class="lists-layout">
<div>
<div class="card" style="margin-bottom:0">
<h2>Books â€” æœ¬</h2>
<div class="new-book-form">
<input id="new-book-input" onkeydown="if(event.key==='Enter')addBook()" placeholder="Book titleâ€¦" type="text"/>
<button class="btn btn-sm" onclick="addBook()">+</button>
</div>
<div class="book-list" id="book-list"></div>
</div>
</div>
<div class="card">
<h2 id="list-title">Word List â€” å˜èªãƒªã‚¹ãƒˆ</h2>
<div id="word-list-content"><p class="empty-state">Select or create a book to see its word list.</p></div>
</div>
</div>
</div>
<!-- â”€â”€ HANDWRITE PANEL â”€â”€ -->
<div class="panel" id="panel-writing">
<div class="writing-layout writing-two">
<div class="card canvas-wrap">
<h2>Handwrite Kanji â€” æ‰‹æ›¸ãæ¤œç´¢ (1)</h2>
<canvas height="350" id="writing-canvas-1" width="420"></canvas>
<div class="canvas-controls">
<div class="brush-row">
<span>Size</span>
<input id="brush-size" max="40" min="1" type="range" value="10"/>
<input id="brush-color" type="color" value="#1a1410"/>
</div>
<button class="btn btn-sm btn-outline" onclick="hwClear(1)">Clear</button>
<button class="btn btn-sm" onclick="hwRecognize(1)">Recognize</button>
</div>
<div class="candidate-row" id="hw-candidates-1"></div>
<p class="status-msg" id="hw-status-1">Draw a kanji, then click Recognize.</p>
</div>
<div class="card canvas-wrap">
<h2>Handwrite Kanji â€” æ‰‹æ›¸ãæ¤œç´¢ (2)</h2>
<canvas height="350" id="writing-canvas-2" width="420"></canvas>
<div class="canvas-controls">
<div class="brush-row">
<span>Size</span>
<!-- shares brush controls -->
</div>
<button class="btn btn-sm btn-outline" onclick="hwClear(2)">Clear</button>
<button class="btn btn-sm" onclick="hwRecognize(2)">Recognize</button>
</div>
<div class="candidate-row" id="hw-candidates-2"></div>
<p class="status-msg" id="hw-status-2">You can write a second kanji to build multi-kanji words.</p>
</div>
<div class="card hw-build">
<h2>Build Word â€” çµ„ã¿åˆã‚ã›</h2>
<p class="radical-info">Click a candidate above to add it. You can edit the field manually too.</p>
<div class="search-bar">
<input autocomplete="off" id="hw-query" placeholder="ä¾‹: æ—¥æœ¬ / çŒ« / ä¸€" type="text"/>
<button class="btn" onclick="hwLookup()">Search</button>
<button class="btn btn-outline" onclick="hwClearQuery()">Clear</button>
</div>
<div id="hw-word-suggestions"><p class="status-msg">Write kanji (or type) to see word suggestions.</p></div>
</div>
</div>
</div>
<!-- â”€â”€ RADICALS PANEL â”€â”€ -->
<div class="panel" id="panel-radicals">
<div class="radical-layout">
<div class="card">
<h2>Radical Picker â€” éƒ¨é¦–</h2>
<div class="selected-radicals" id="selected-radicals-display">â€”</div><p class="radical-info">Select one or more radicals to find kanji. Results come from Jisho.</p>
<div class="stroke-filter" id="stroke-filter"></div>
<div class="radical-grid" id="radical-grid"></div>
<div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap"><button class="btn" onclick="searchByRadicals()" type="button">Get Kanji</button><button class="btn btn-outline" onclick="clearRadicals()" type="button">Clear selection</button></div></div>
<div class="card"><h2>Build Word â€” çµ„ã¿åˆã‚ã›</h2><p class="radical-info">1) Select radicals/components. 2) Click â€œGet Kanjiâ€. 3) Click kanji to build a word. 4) Search.</p><div class="search-bar"><input autocomplete="off" id="radical-query" placeholder="ä¾‹: æ—¥æœ¬ / çŒ« / ä¸€" type="text"/><button class="btn" onclick="radicalSearchWord()" type="button">Search</button><button class="btn btn-outline" onclick="radicalClearAll()" type="button">Clear</button></div><div id="radical-word-suggestions"><p class="status-msg">Build a query to see suggestions.</p></div><div id="radical-kanji-candidates"><p class="status-msg">Select radicals and click â€œGet Kanjiâ€.</p></div></div></div>
</div>

<!-- â”€â”€ BOOKSHELF PANEL â”€â”€ -->
<div class="panel" id="panel-bookshelf">

  <!-- Add book bar -->
  <div class="shelf-add-bar">
    <input id="shelf-quick-title" type="text" placeholder="Book titleâ€¦ (quick add)"
      onkeydown="if(event.key==='Enter')quickAddShelfBook()" autocomplete="off"/>
    <button class="btn btn-sm" onclick="quickAddShelfBook()">+ Quick add</button>
    <button class="btn btn-sm btn-outline" onclick="openAddShelfModal()">ï¼‹ Full details</button>
  </div>

  <!-- Two-column layout -->
  <div class="shelf-layout">

    <!-- Left: shelf list -->
    <div class="shelf-sidebar">
      <div id="shelf-list"></div>
    </div>

    <!-- Right: detail pane -->
    <div class="shelf-detail card" id="shelf-detail">
      <div class="shelf-empty-detail">
        <p class="empty-state">Select a book to see details,<br>or add one above.</p>
      </div>
    </div>

  </div>
</div>

<!-- â”€â”€ BOOKSHELF MODAL â”€â”€ -->
<div class="modal-overlay" id="shelf-modal">
  <div class="modal">
    <h2 id="shelf-modal-title-label">Add Book</h2>
    <input type="hidden" id="shelf-form-id"/>

    <div class="modal-section">
      <label>Title *</label>
      <input class="modal-input" id="shelf-form-title" type="text" placeholder="e.g. ã‚³ãƒ³ãƒ“ãƒ‹äººé–“" autocomplete="off"/>
    </div>

    <div class="modal-section">
      <label>Author</label>
      <input class="modal-input" id="shelf-form-author" type="text" placeholder="e.g. æ‘ç”°æ²™è€¶é¦™" autocomplete="off"/>
    </div>

    <div class="shelf-modal-row">
      <div class="modal-section" style="flex:1">
        <label>Status</label>
        <select class="modal-input" id="shelf-form-status">
          <option value="reading">ğŸ“– Reading</option>
          <option value="finished">âœ… Finished</option>
          <option value="paused">â¸ Paused</option>
          <option value="wishlist">ğŸŒ¸ Want to read</option>
        </select>
      </div>
      <div class="modal-section" style="flex:1">
        <label>Date finished</label>
        <input class="modal-input" id="shelf-form-date" type="date"/>
      </div>
    </div>

    <div class="modal-section">
      <label>Rating</label>
      <div class="shelf-modal-stars" id="shelf-modal-rating" data-value="0">
        <span class="star" data-v="1">â˜…</span>
        <span class="star" data-v="2">â˜…</span>
        <span class="star" data-v="3">â˜…</span>
        <span class="star" data-v="4">â˜…</span>
        <span class="star" data-v="5">â˜…</span>
      </div>
    </div>

    <div class="modal-section">
      <label>My Notes</label>
      <textarea class="modal-input" id="shelf-form-notes" rows="5"
        placeholder="Thoughts, impressions, memorable quotesâ€¦" style="border-radius:var(--radius-box);resize:vertical;min-height:100px;"></textarea>
    </div>

    <div class="modal-footer">
      <button class="btn btn-sm btn-outline" onclick="closeShelfModal()">Cancel</button>
      <button class="btn btn-sm" onclick="saveShelfModal()">Save</button>
    </div>
  </div>
</div>


<div class="panel" id="panel-flashcards">
<div class="fc-setup" id="fc-setup">
<div class="card">
<h2>Study Session â€” å‹‰å¼·</h2>
<p style="font-size:0.9rem;color:var(--muted);margin-bottom:16px;font-style:italic">
          Choose which book(s) to study, then configure your session.
        </p>
<p style="font-size:0.85rem;color:var(--muted);margin-bottom:8px;letter-spacing:0.05em">BOOKS</p>
<div class="fc-book-grid" id="fc-book-grid"></div>
<div class="fc-options">
<div class="fc-option-row">
<label>Show</label>
<select id="fc-mode">
<option value="kanji-to-meaning">Kanji â†’ Meaning</option>
<option value="meaning-to-kanji">Meaning â†’ Kanji</option>
<option value="reading-to-meaning">Reading â†’ Meaning</option>
</select>
</div>
<div class="fc-option-row">
<label>Order</label>
<select id="fc-order">
<option value="random">Random</option>
<option value="sequential">Sequential</option>
<option value="hard-first">Hard first</option>
</select>
</div>
<div class="fc-option-row">
<label>Limit</label>
<select id="fc-limit">
<option value="0">All cards</option>
<option value="10">10 cards</option>
<option value="20">20 cards</option>
<option value="30">30 cards</option>
<option value="50">50 cards</option>
</select>
</div>
</div>
</div>
<div style="text-align:center">
<button class="btn" onclick="startFlashcards()" style="padding:12px 36px;font-size:1.1rem;letter-spacing:0.1em">Start Study é–‹å§‹</button>
</div>
</div>
<div class="fc-study" id="fc-study">
<div class="fc-progress-bar-wrap">
<span id="fc-count">0 / 0</span>
<div class="fc-progress-bar"><div class="fc-progress-fill" id="fc-progress-fill" style="width:0%"></div></div>
<button class="btn btn-sm btn-outline" onclick="endSession()">End</button>
</div>
<div class="fc-session-stats">
<div class="fc-stat"><span class="val" id="stat-again">0</span>Again</div>
<div class="fc-stat"><span class="val" id="stat-hard">0</span>Hard</div>
<div class="fc-stat"><span class="val" id="stat-good">0</span>Good</div>
<div class="fc-stat"><span class="val" id="stat-easy">0</span>Easy</div>
</div>
<div class="fc-card-scene" id="fc-card-scene" onclick="flipCard()">
<div class="fc-card-inner" id="fc-card-inner">
<div class="fc-card-face fc-front">
<div class="fc-hint" id="fc-front-hint">KANJI</div>
<div class="fc-word" id="fc-front-word">â€”</div>
<div class="fc-reading-front" id="fc-front-sub"></div>
<div class="fc-tap-hint">tap to reveal</div>
</div>
<div class="fc-card-face fc-back">
<div class="fc-hint">ANSWER</div>
<div class="fc-word-back" id="fc-back-word"></div>
<div class="fc-meaning-back" id="fc-back-meaning"></div>
<div class="fc-reading-back" id="fc-back-reading"></div>
</div>
</div>
</div>
<div class="fc-ratings" id="fc-ratings">
<button class="fc-rating-btn fc-btn-again" onclick="rateCard('again')">
<span class="label">Again</span><span class="sub">ã‚‚ã†ä¸€åº¦</span>
</button>
<button class="fc-rating-btn fc-btn-hard" onclick="rateCard('hard')">
<span class="label">Hard</span><span class="sub">é›£ã—ã„</span>
</button>
<button class="fc-rating-btn fc-btn-good" onclick="rateCard('good')">
<span class="label">Good</span><span class="sub">ã‚ã‹ã£ãŸ</span>
</button>
<button class="fc-rating-btn fc-btn-easy" onclick="rateCard('easy')">
<span class="label">Easy</span><span class="sub">ç°¡å˜</span>
</button>
</div>
<div class="fc-shortcuts">Space / Enter = flip Â |Â  1 Again Â  2 Hard Â  3 Good Â  4 Easy</div>
</div>
<div class="fc-results" id="fc-results">
<div class="fc-results-title">Session Complete å®Œäº†</div>
<div class="fc-results-grid" id="fc-results-grid"></div>
<div class="fc-again-list" id="fc-again-list" style="display:none">
<h3>Review Again â€” è¦å¾©ç¿’</h3>
<div id="fc-again-items"></div>
</div>
<div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center">
<button class="btn" onclick="restartSession()">Study Again</button>
<button class="btn btn-outline" onclick="backToSetup()">Change Settings</button>
</div>
</div>
</div>
</main>
<script defer="" src="state.js"></script>
<script defer="" src="nav.js"></script>
<script defer="" src="lookup.js"></script>
<script defer="" src="books.js"></script>
<script defer="" src="bookshelf.js"></script>
<script defer="" src="handwriting.js"></script>
<script defer="" src="radicals.js"></script>
<script defer="" src="flashcards.js"></script>
<script defer="" src="init.js"></script>
</body></html>
